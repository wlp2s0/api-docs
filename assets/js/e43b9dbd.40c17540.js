(self.webpackChunkdev_rev_docs=self.webpackChunkdev_rev_docs||[]).push([[2753],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return c}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),s=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(d.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,d=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=s(n),c=r,k=u["".concat(d,".").concat(c)]||u[c]||m[c]||l;return n?a.createElement(k,i(i({ref:t},p),{},{components:n})):a.createElement(k,i({ref:t},p))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=u;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3583:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return d},metadata:function(){return s},toc:function(){return p},default:function(){return u}});var a=n(2122),r=n(9756),l=(n(7294),n(3905)),i=["components"],o={sidebar_position:4},d="Work with draft payments",s={unversionedId:"build-banking-apps/tutorials/work-with-draft-payments",id:"build-banking-apps/tutorials/work-with-draft-payments",isDocsHomePage:!1,title:"Work with draft payments",description:"Review the important considerations when you build your draft payments integration.",source:"@site/docs/build-banking-apps/tutorials/work-with-draft-payments.md",sourceDirName:"build-banking-apps/tutorials",slug:"/build-banking-apps/tutorials/work-with-draft-payments",permalink:"/docs/build-banking-apps/tutorials/work-with-draft-payments",version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docs",previous:{title:"Create your first draft payment",permalink:"/docs/build-banking-apps/tutorials/create-your-first-draft-payment"},next:{title:"Work with webhooks",permalink:"/docs/build-banking-apps/tutorials/work-with-webhooks"}},p=[{value:"International payments",id:"international-payments",children:[{value:"Account selection",id:"account-selection",children:[]}]},{value:"CSV validation",id:"csv-validation",children:[{value:"Error codes",id:"error-codes",children:[]}]},{value:"HTTP error codes for draft payments",id:"http-error-codes-for-draft-payments",children:[]},{value:"Payment orders vs transfers",id:"payment-orders-vs-transfers",children:[{value:"Draft payment order",id:"draft-payment-order",children:[]},{value:"Transfers",id:"transfers",children:[]}]},{value:"Failure codes",id:"failure-codes",children:[]}],m={toc:p};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"work-with-draft-payments"},"Work with draft payments"),(0,l.kt)("p",null,"Review the important considerations when you build your draft payments integration."),(0,l.kt)("h2",{id:"international-payments"},"International payments"),(0,l.kt)("p",null,"In the CSV file that you upload to create draft payments, the following fields and multiple address fields are provided for draft payments made to bank accounts across the globe."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Account Number")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Sort Code")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"Routing Number")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"IBAN")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BIC")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Currency")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Country"))),(0,l.kt)("p",null,"For each draft payment, the following fields are required:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Name")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Recipient type")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Recipient bank country")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Currency")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Amount")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Payment reference"))),(0,l.kt)("p",null,"However, depending on the currency and the country of the bank account, some fields are also required for a draft payment in the CSV file, which is shown in the following table:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Country"),(0,l.kt)("th",{parentName:"tr",align:null},"Currency"),(0,l.kt)("th",{parentName:"tr",align:null},"Fields Required"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"GB"),(0,l.kt)("td",{parentName:"tr",align:null},"GBP"),(0,l.kt)("td",{parentName:"tr",align:null},"Account Number, SortCode")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SEPA Country"),(0,l.kt)("td",{parentName:"tr",align:null},"EUR"),(0,l.kt)("td",{parentName:"tr",align:null},"IBAN, BIC")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DK, NO, SE"),(0,l.kt)("td",{parentName:"tr",align:null},"Local currency (DKK, NOK, SEK)"),(0,l.kt)("td",{parentName:"tr",align:null},"IBAN, BIC")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"IBAN Country"),(0,l.kt)("td",{parentName:"tr",align:null},"Any supported (with exception of Euros in SEPA)"),(0,l.kt)("td",{parentName:"tr",align:null},"IBAN, BIC, Address")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"US"),(0,l.kt)("td",{parentName:"tr",align:null},"USD"),(0,l.kt)("td",{parentName:"tr",align:null},"Account number, Routing number, Address, State or province")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"US"),(0,l.kt)("td",{parentName:"tr",align:null},"Any supported (with exception of USD)"),(0,l.kt)("td",{parentName:"tr",align:null},"Account number, BIC, Address, State or province")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"HK"),(0,l.kt)("td",{parentName:"tr",align:null},"Any supported"),(0,l.kt)("td",{parentName:"tr",align:null},"Account number, BIC, Address")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"PH"),(0,l.kt)("td",{parentName:"tr",align:null},"Any supported + PHP"),(0,l.kt)("td",{parentName:"tr",align:null},"Account number, BIC, Address")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ID"),(0,l.kt)("td",{parentName:"tr",align:null},"Any supported + IDR"),(0,l.kt)("td",{parentName:"tr",align:null},"Account number, BIC, Address")))),(0,l.kt)("p",null,"See the following lists for IBAN/SEPA countries and currencies supported."),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"To use our draft payments endpoint in any countries/currencies not listed below, ",(0,l.kt)("a",{href:"mailto:api-requests@revolut.com"},"reach out")," and we can look to incorporate your request."))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"List"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SEPA countries"),(0,l.kt)("td",{parentName:"tr",align:null},"AT, BE, BG, CH, CZ, DE, DK, EE, ES, FI, FR, GB, GF, GR, HR, HU, IE, IS, IT, LT, LU, LV, MQ, NL, NO, PL, PM, PT, RO, SE, SI, SK, SM, TF, VA, YT")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"IBAN countries"),(0,l.kt)("td",{parentName:"tr",align:null},"AD, AE, AL, AO, AT, BA, BE, BG, BH, CH, CR, CY, CZ, DE, DK, DO, DZ, EE, ES, FI, FO, FR, GB, GE, GF, GI, GL, GR, HR, HU, IE, IL, IS, IT, JO, KW, KZ, LB, LI, LT, LU, LV, MC, MD, ME, MG, MK, MQ, MR, MT, MU, NL, NO, PK, PL, PM, PS, PT, QA, RO, RS, SA, SE, SI, SK, SM, TF, TN, TR, VA, VG, YT")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Currencies supported"),(0,l.kt)("td",{parentName:"tr",align:null},"AED, AUD, BGN, CAD, CHF, CZK, DKK, EUR, GBP, HKD, HRK, HUF, ILS, JPY, MXN, NOK, NZD, PLN, QAR, RON, SAR, SEK, SGD, THB, TRY, USD, ZAR")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Address is defined as ",(0,l.kt)("code",null,"Country"),", ",(0,l.kt)("code",null,"Address line 1"),", ",(0,l.kt)("code",null,"City")," and ",(0,l.kt)("code",null,"Postcode")," fields. It should be the address of the recipient."),(0,l.kt)("p",{parentName:"div"},"PHP and IDR transfers are only supported within the Philippines and Indonesia respectively."))),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h3",{id:"account-selection"},"Account selection"),(0,l.kt)("p",null,"In Revolut Business, an account can have multiple pockets in different currencies."),(0,l.kt)("p",null,"The pocket selected for a draft payment is the pocket with the highest amount of currency that matches the currency of the payment."),(0,l.kt)("p",null,"If no pocket matches the currency of the payment, the pocket with the default currency of the account is chosen and there is an automatic currency conversion while the payment is being executed."),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h2",{id:"csv-validation"},"CSV validation"),(0,l.kt)("p",null,"CSV with errors:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"Name,Recipient type,Account number,Sort code or Routing number,IBAN,BIC,Recipient bank country,Currency,Amount,Payment reference,Recipient country,State or province,Address line 1,Address line 2,City,Postal code\nDmitry Vim,INDIVIDUAL,40513598,207409,,,GB,GBP,10,Comment Comment Comment Comment Comment Comment Comment Comment Comment Comment Comment Comment Comment Comment,GB,,Revolutest LTD, Level 39,Somewhere in London,E14 5AB\nDmitry Vim,INDIVIDUAL,40513598,207409,,,GB,abc,25,Second comment,uk,,Revolutest LTD, Level 39,Somewhere in London,E14 5AB\n,INDIVIDUAL,,,,,GB,GBP,25,Second comment,GB,,Revolutest LTD Level 39,Somewhere in London,Taumatawhakatangihangakoauauotamateaturipukakapikimaungahoronukupokaiwhenuakitanatahu,E14 5AB\nDmitry Vim,INDIVIDUAL,776644,,,BOFMHKHH,CN,USD,10,User comment,CN,,1 Yuan,,Beijing City,100046\nDmitry Vim,,40513598,207409,,,GB,GBP,0.10,User comment,GB,,Revolutest LTD, Level 39,Somewhere in London,E14 5AB\nDmitry Vim,INDIVIDUA,40513598,207409,,,GB,GBP,10,User comment,GB,,Revolutest LTD, Level 39,Somewhere in London,E14 5AB\nDmitry Vim,INDIVIDUAL,\xd3\u0141,2409,1234,ABC,GB,GBP,10,User comment,GB,,Revolutest LTD, Level 39,Somewhere in London,E14 5AB\nDmitryVim,INDIVIDUAL,40513598,207409,,,GB,GBP,10,User comment,GB,,,Somewhere in London,123\nDmitry Vim,INDIVIDUAL,40513598,207409,,,GB,GBP,10,User comment,GB,,Revolutest LTD, Level 39,Somewhere in London,123\n")),(0,l.kt)("p",null,"Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Id": "a3805a6c-ae21-4871-b9a3-2c2c9db60ffa",\n  "Message": "File validation failed",\n  "Errors": [{\n    "Row": 2,\n    "Errors": [{\n      "Field": "Payment reference",\n      "Code": 2003,\n      "Message": "Payment reference cannot be longer than 100 symbols"\n    }]\n  }, {\n    "Row": 3,\n    "Errors": [{\n      "Field": "Currency",\n      "Code": 2004,\n      "Message": "Invalid Currency: abc"\n    }, {\n      "Field": "Recipient country",\n      "Code": 2004,\n      "Message": "Invalid Recipient country: uk"\n    }]\n  }, {\n    "Row": 4,\n    "Errors": [{\n      "Field": "Name",\n      "Code": 2001,\n      "Message": "Name is required"\n    }, {\n      "Field": "City",\n      "Code": 2003,\n      "Message": "City cannot be longer than 50 symbols"\n    }]\n  }, {\n    "Row": 5,\n    "Errors": [{\n      "Code": 2008,\n      "Message": "Invalid BIC for CN bank country"\n    }]\n  }, {\n    "Row": 6,\n    "Errors": [{\n      "Field": "Recipient type",\n      "Code": 2001,\n      "Message": "Recipient type is required"\n    }]\n  }, {\n    "Row": 7,\n    "Errors": [{\n      "Field": "Recipient type",\n      "Code": 2004,\n      "Message": "Invalid Recipient type: INDIVIDUA"\n    }]\n  }, {\n    "Row": 8,\n    "Errors": [{\n      "Field": "Account number",\n      "Code": 2004,\n      "Message": "Invalid Account number: \ufffd?"\n    }, {\n      "Field": "Sort code or Routing number",\n      "Code": 2004,\n      "Message": "Invalid Sort code or Routing number: 2409"\n    }, {\n      "Field": "IBAN",\n      "Code": 2004,\n      "Message": "Invalid IBAN: 1234"\n    }, {\n      "Field": "BIC",\n      "Code": 2004,\n      "Message": "Invalid BIC: ABC"\n    }]\n  }, {\n    "Row": 9,\n    "Errors": [{\n      "Field": "Name",\n      "Code": 2005,\n      "Message": "First and last name are required for individuals"\n    }]\n  }, {\n    "Row": 10,\n    "Errors": [{\n      "Code": 2008,\n      "Message": "Postcode 123 is invalid, please change it before continuing"\n    }]\n  }],\n  "Code": 3039\n}\n')),(0,l.kt)("p",null,"We validate if the fields in the CSV match the format required and if the bank account details provided are valid for a payment to be made."),(0,l.kt)("p",null,"If there is an issue with the CSV uploaded, the API responds with a ",(0,l.kt)("inlineCode",{parentName:"p"},"3039")," error code and give details of the CSV validation errors row by row. Each error message is accompanied by a corresponding ",(0,l.kt)("inlineCode",{parentName:"p"},"code"),"."),(0,l.kt)("p",null,"In addition, with the exception of error codes ",(0,l.kt)("inlineCode",{parentName:"p"},"2008")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"1000"),", we will also pass the relevant ",(0,l.kt)("inlineCode",{parentName:"p"},"Field")," that causes the validation to fail."),(0,l.kt)("h3",{id:"error-codes"},"Error codes"),(0,l.kt)("p",null,"Check the example file above and the response with relevant errors."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Code"),(0,l.kt)("th",{parentName:"tr",align:null},"Reason"),(0,l.kt)("th",{parentName:"tr",align:null},"Sample error messages"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2001"),(0,l.kt)("td",{parentName:"tr",align:null},"The fields that are required are missing in the CSV."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Name is required "),", ",(0,l.kt)("inlineCode",{parentName:"td"},"Recipient type is required"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2002"),(0,l.kt)("td",{parentName:"tr",align:null},"The ",(0,l.kt)("inlineCode",{parentName:"td"},"amount")," field is not a valid decimal number."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Invalid amount format: 0;10, use only numbers and dot to separate cents"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"Invalid amount format: A, use only numbers and dot to separate cents"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2003"),(0,l.kt)("td",{parentName:"tr",align:null},"The string size is too large."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Name cannot be longer than 80 symbols"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"City cannot be longer than 50 symbols"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2004"),(0,l.kt)("td",{parentName:"tr",align:null},"One of the fields in the CSV is invalid."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Invalid Recipient type: INDIVIDUA"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"Invalid IBAN: 1234"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"Invalid Recipient country: uk"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2005"),(0,l.kt)("td",{parentName:"tr",align:null},"The first and last name is required when recipient type is ",(0,l.kt)("inlineCode",{parentName:"td"},"INDVIDUAL"),"."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"First and last name are required for individuals"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2008"),(0,l.kt)("td",{parentName:"tr",align:null},"It was not possible to create counterparty based on the details provided\u3002"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Invalid BIC for <some_country> bank country"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"Unsupported currency for external beneficiary"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"Postcode <postcode> is invalid, please change it before continuing"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2009"),(0,l.kt)("td",{parentName:"tr",align:null},"Payments must be greater than 0."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Amount has to be greater than zero"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"4025"),(0,l.kt)("td",{parentName:"tr",align:null},"Routing number must be valid for US payments."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"123456759 is not a valid US routing number"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1000"),(0,l.kt)("td",{parentName:"tr",align:null},"Unknown reason"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Something went wrong. Please contact Revolut Business support."),", ",(0,l.kt)("inlineCode",{parentName:"td"},"Something went wrong. Please contact Revolut Business support with error ID  <error_id>"))))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Though the error codes above encapsulate all potential errors, the message provided is subject to changes. Reach out for further details."))),(0,l.kt)("h2",{id:"http-error-codes-for-draft-payments"},"HTTP error codes for draft payments"),(0,l.kt)("p",null,"Check the following table to understand the error messages for draft payments:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Http Error"),(0,l.kt)("th",{parentName:"tr",align:null},"Code"),(0,l.kt)("th",{parentName:"tr",align:null},"Message"),(0,l.kt)("th",{parentName:"tr",align:null},"Reason"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"400"),(0,l.kt)("td",{parentName:"tr",align:null},"2101"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum file size limit of 10MB bytes exceeded"),(0,l.kt)("td",{parentName:"tr",align:null},"File size uploaded was too large.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"400"),(0,l.kt)("td",{parentName:"tr",align:null},"2101"),(0,l.kt)("td",{parentName:"tr",align:null},"Multiple currencies in single file are not allowed"),(0,l.kt)("td",{parentName:"tr",align:null},"Only payments in one currency can be uploaded.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"400"),(0,l.kt)("td",{parentName:"tr",align:null},"3039"),(0,l.kt)("td",{parentName:"tr",align:null},"File validation failed"),(0,l.kt)("td",{parentName:"tr",align:null},"There was an error in the details provided in the CSV.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"403"),(0,l.kt)("td",{parentName:"tr",align:null},"9002"),(0,l.kt)("td",{parentName:"tr",align:null},"This action is forbidden"),(0,l.kt)("td",{parentName:"tr",align:null},"The user that tried to make this action was not the Business owner of the account.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"404"),(0,l.kt)("td",{parentName:"tr",align:null},"3070/11101"),(0,l.kt)("td",{parentName:"tr",align:null},"Not found error"),(0,l.kt)("td",{parentName:"tr",align:null},"Draft payment was not found.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"422"),(0,l.kt)("td",{parentName:"tr",align:null},"3058/11102"),(0,l.kt)("td",{parentName:"tr",align:null},"Invalid state error"),(0,l.kt)("td",{parentName:"tr",align:null},"Draft payment was not in the right state for a certain action. For example trying to delete a draft payment that had already been processed.")))),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h2",{id:"payment-orders-vs-transfers"},"Payment orders vs transfers"),(0,l.kt)("p",null,"When you create a bulk draft payment, it consists of a ",(0,l.kt)("i",null,"draft payment order"),", which in turn contains a set of ",(0,l.kt)("i",null," transfers"),"."),(0,l.kt)("p",null,"Both a draft payment order and transfers have own independent states."),(0,l.kt)("h3",{id:"draft-payment-order"},"Draft payment order"),(0,l.kt)("p",null,"A draft payment order is what the user either approves or deletes from the user interface. It can have the following possible states:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Draft Payment Order Status"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Awaiting")),(0,l.kt)("td",{parentName:"tr",align:null},"The draft payment order is created and awaiting approval from user.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Approved")),(0,l.kt)("td",{parentName:"tr",align:null},"The draft payment order is approved by the user and the transfers are in the process of being executed.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Processed")),(0,l.kt)("td",{parentName:"tr",align:null},"The draft payment order is processed.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Deleted")),(0,l.kt)("td",{parentName:"tr",align:null},"The draft payment order is deleted by the user.")))),(0,l.kt)("h3",{id:"transfers"},"Transfers"),(0,l.kt)("p",null,"When the user approves a draft payment order, each transfer is executed individually. Each transfer can have the following possible states:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Transfer Status"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Created")),(0,l.kt)("td",{parentName:"tr",align:null},"The transfer is created but hasn't been executed yet.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Pending")),(0,l.kt)("td",{parentName:"tr",align:null},"The transfer is in the queue to be executed.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Completed")),(0,l.kt)("td",{parentName:"tr",align:null},"The transfer is completed successfully and a payment has been made from the users account.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Failed")),(0,l.kt)("td",{parentName:"tr",align:null},"The transfer fails and no payment has been made. Accompanying failure reason code and message are returned in ",(0,l.kt)("inlineCode",{parentName:"td"},"GET")," endpoint.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Deleted")),(0,l.kt)("td",{parentName:"tr",align:null},"The transfer is deleted by the user.")))),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h2",{id:"failure-codes"},"Failure codes"),(0,l.kt)("p",null,"There are a number of different reasons that transfers can fail."),(0,l.kt)("p",null,"Check the following table about different values of ",(0,l.kt)("inlineCode",{parentName:"p"},"FailedReasonCode"),":"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Failure Code"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1003"),(0,l.kt)("td",{parentName:"tr",align:null},"Recipient is unable to receive funds.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1006"),(0,l.kt)("td",{parentName:"tr",align:null},"User has insufficient balance to execute the payment.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"4000"),(0,l.kt)("td",{parentName:"tr",align:null},"Internal transfer error. Typically occurs when a user is trying to send a payment to a sub-account or sending to an account with the incorrect currency.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"4032"),(0,l.kt)("td",{parentName:"tr",align:null},"Invalid transfer reference. The transfer reference that was detailed in the payment was invalid.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"3067"),(0,l.kt)("td",{parentName:"tr",align:null},"Unknown error. Please ask user to reach out to support.")))),(0,l.kt)("p",null,"Each ",(0,l.kt)("inlineCode",{parentName:"p"},"FailedReasonCode")," is accompanied by a custom ",(0,l.kt)("inlineCode",{parentName:"p"},"FailedReasonMessage")," to give detail on the failure."),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"In case of any questions, reach out to Revolut Business support to get further help in understanding the failure of specific transfers."))),(0,l.kt)("div",{class:"feedback"}))}u.isMDXComponent=!0}}]);