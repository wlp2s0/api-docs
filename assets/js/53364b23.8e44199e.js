(self.webpackChunkdev_rev_docs=self.webpackChunkdev_rev_docs||[]).push([[8167],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return p},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),s=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=s(e.components);return n.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=s(a),c=r,k=m["".concat(d,".").concat(c)]||m[c]||u[c]||l;return a?n.createElement(k,o(o({ref:t},p),{},{components:a})):n.createElement(k,o({ref:t},p))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=m;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},8215:function(e,t,a){"use strict";var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,r=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:r},t)}},5064:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(7294),r=a(9443);var l=function(){var e=(0,n.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},o=a(6010),i="tabItem_1uMI",d="tabItemActive_2DSg";var s=37,p=39;var u=function(e){var t=e.lazy,a=e.block,r=e.defaultValue,u=e.values,m=e.groupId,c=e.className,k=l(),h=k.tabGroupChoices,f=k.setTabGroupChoices,N=(0,n.useState)(r),y=N[0],g=N[1],v=n.Children.toArray(e.children),b=[];if(null!=m){var C=h[m];null!=C&&C!==y&&u.some((function(e){return e.value===C}))&&g(C)}var w=function(e){var t=e.currentTarget,a=b.indexOf(t),n=u[a].value;g(n),null!=m&&(f(m,n),setTimeout((function(){var e,a,n,r,l,o,i,s;(e=t.getBoundingClientRect(),a=e.top,n=e.left,r=e.bottom,l=e.right,o=window,i=o.innerHeight,s=o.innerWidth,a>=0&&l<=s&&r<=i&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(d),setTimeout((function(){return t.classList.remove(d)}),2e3))}),150))},x=function(e){var t,a;switch(e.keyCode){case p:var n=b.indexOf(e.target)+1;a=b[n]||b[0];break;case s:var r=b.indexOf(e.target)-1;a=b[r]||b[b.length-1]}null==(t=a)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},c)},u.map((function(e){var t=e.value,a=e.label;return n.createElement("li",{role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,className:(0,o.Z)("tabs__item",i,{"tabs__item--active":y===t}),key:t,ref:function(e){return b.push(e)},onKeyDown:x,onFocus:w,onClick:w},a)}))),t?(0,n.cloneElement)(v.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},v.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},9443:function(e,t,a){"use strict";var n=(0,a(7294).createContext)(void 0);t.Z=n},3139:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return u},toc:function(){return m},default:function(){return k}});var n=a(2122),r=a(9756),l=(a(7294),a(3905)),o=a(5064),i=a(8215),d=["components"],s={sidebar_position:3},p="Create your first draft payment",u={unversionedId:"build-banking-apps/tutorials/create-your-first-draft-payment",id:"build-banking-apps/tutorials/create-your-first-draft-payment",isDocsHomePage:!1,title:"Create your first draft payment",description:"To use our draft payments endpoint, you must register your application and request an approval in the Developer Portal.",source:"@site/docs/build-banking-apps/tutorials/create-your-first-draft-payment.md",sourceDirName:"build-banking-apps/tutorials",slug:"/build-banking-apps/tutorials/create-your-first-draft-payment",permalink:"/docs/build-banking-apps/tutorials/create-your-first-draft-payment",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docs",previous:{title:"Initiate your first payment",permalink:"/docs/build-banking-apps/tutorials/initiate-your-first-payment"},next:{title:"Work with draft payments",permalink:"/docs/build-banking-apps/tutorials/work-with-draft-payments"}},m=[{value:"1. Get user&#39;s authorization",id:"1-get-users-authorization",children:[]},{value:"2. Exchange authorization code for access token",id:"2-exchange-authorization-code-for-access-token",children:[]},{value:"3. Refresh access token",id:"3-refresh-access-token",children:[]},{value:"4. Create a draft payment",id:"4-create-a-draft-payment",children:[{value:"Parameters",id:"parameters",children:[]},{value:"CSV format",id:"csv-format",children:[]}]},{value:"5. Get a draft payment",id:"5-get-a-draft-payment",children:[]},{value:"6. Get list of draft payments",id:"6-get-list-of-draft-payments",children:[{value:"Parameters",id:"parameters-1",children:[]}]},{value:"What\u2019s next",id:"whats-next",children:[]}],c={toc:m};function k(e){var t=e.components,a=(0,r.Z)(e,d);return(0,l.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"create-your-first-draft-payment"},"Create your first draft payment"),(0,l.kt)("p",null,"To use our draft payments endpoint, you must register your application and request an approval in the ",(0,l.kt)("a",{href:"https://developer.revolut.com/portal/applications"},"Developer Portal"),"."),(0,l.kt)("p",null,"Before you begin, ensure that you have:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Registered your application with the ",(0,l.kt)("inlineCode",{parentName:"li"},"draftpayments")," in Developer Portal"),(0,l.kt)("li",{parentName:"ul"},"Obtained a sandbox/production ",(0,l.kt)("inlineCode",{parentName:"li"},"client_id"),"  from Developer Portal"),(0,l.kt)("li",{parentName:"ul"},"Obtained a sandbox/production ",(0,l.kt)("inlineCode",{parentName:"li"},"transport.pem")," certificate from Developer Portal")),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The draft payment function is available only for Revolut Business customers."))),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h2",{id:"1-get-users-authorization"},"1. Get user's authorization"),(0,l.kt)(o.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"prod",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"https://business.revolut.com/partner-confirm?response_type=code&state=state&scope=draftpayments&client_id=your_client_id&redirect_uri=your_redirect_uri\n"))),(0,l.kt)(i.Z,{value:"sandbox",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"https://sandbox-business.revolut.com/partner-confirm?response_type=code&state=state&scope=draftpayments&client_id=your_client_id&redirect_uri=your_redirect_uri\n")))),(0,l.kt)("p",null,"Response would look like this: "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-h"},"https://www.revolut_redirect.com/revolut_redirect?code=oa_sand_kiLg3m7xrNua0rbShC1GQZfbk0DthUhOpVA9xX2oRY0&state=state\n")),(0,l.kt)("p",null,"Before you can start creating draft payments, you must get authorization from the user to make draft payments on their behalf."),(0,l.kt)("p",null,"Redirect the user to the authorization URL with the following parameters."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"scope")),(0,l.kt)("td",{parentName:"tr",align:null},"The scope for authorization required from the user."),(0,l.kt)("td",{parentName:"tr",align:null},"yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"client_id")),(0,l.kt)("td",{parentName:"tr",align:null},"The client ID for your application."),(0,l.kt)("td",{parentName:"tr",align:null},"yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"redirect_uri")),(0,l.kt)("td",{parentName:"tr",align:null},"One of the redirect URIs that you defined during the application creation."),(0,l.kt)("td",{parentName:"tr",align:null},"yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"state")),(0,l.kt)("td",{parentName:"tr",align:null},"The generated string to verify the response is initiated by the same user."),(0,l.kt)("td",{parentName:"tr",align:null},"yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"response_mode")),(0,l.kt)("td",{parentName:"tr",align:null},"If set to ",(0,l.kt)("inlineCode",{parentName:"td"},"fragment")," parameters will be passed in fragment section of redirect URI. Otherwise, parameters are passed in URI query. Passing parameters in fragment considered to be more secure."),(0,l.kt)("td",{parentName:"tr",align:null},"no")))),(0,l.kt)("p",null,"On successful completion of the authorization flow, you receive an authorization code (",(0,l.kt)("inlineCode",{parentName:"p"},"code"),")."),(0,l.kt)("p",null,"Check the response example on the right to see what the code looks like."),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The ",(0,l.kt)("code",null,"code")," is valid only for two minutes."))),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h2",{id:"2-exchange-authorization-code-for-access-token"},"2. Exchange authorization code for access token"),(0,l.kt)("p",null,"Token request via MTLS:"),(0,l.kt)(o.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"prod",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl  --key private.key --cert transport.pem \\\n--location --request POST 'https://mtls-auth.revolut.com/token' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=authorization_code' \\\n--data-urlencode 'code=<insert authorisation_code>'\n"))),(0,l.kt)(i.Z,{value:"sandbox",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -k --key private.key --cert transport.pem \\\n--location --request POST 'https://sandbox-mtls-auth.revolut.com/token' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=authorization_code' \\\n--data-urlencode 'code=<insert authorisation_code>'\n")))),(0,l.kt)("p",null,"MTLS response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token":"oa_prod_uuWhyiJt1oSoE6aeSxVO8ZpuR_VtgrgPllZKSvHoQ-I",\n  "refresh_token":"oa_prod_tUf_3gZJA6vNH4AnBMVEPqbykkfgBomWwDGRo8tBThA",\n  "access_token_id":"3d3ef8a1-f920-4d6d-9106-e7fcf350125c",\n  "token_type":"Bearer",\n  "expires_in":7775999,\n}\n')),(0,l.kt)("p",null,"Exchange your authorization code for an access token using the token endpoint."),(0,l.kt)("p",null,"Check the request and response example on the right, where:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"access_token")," is the access token you received."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"expires_in")," is the time duration in seconds that the token is valid for. An access token is valid for 90 days. Before it expires, you must refresh the access token. For more information, see ",(0,l.kt)("a",{href:"#tutorials-tutorials-create-your-first-draft-payment-3-refresh-access-token"},"Refresh access token"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"access_token_id")," is used in conjunction with the ",(0,l.kt)("inlineCode",{parentName:"li"},"token")," webhook to identify tokens where the user has revoked their consent.")),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h2",{id:"3-refresh-access-token"},"3. Refresh access token"),(0,l.kt)("p",null,"Refresh access token:"),(0,l.kt)(o.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"prod",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl --key private.key --cert transport.pem \\\n--location --request POST 'https://mtls-auth.revolut.com/token' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=refresh_token' \\\n--data-urlencode 'refresh_token=<insert refresh_token>'\n"))),(0,l.kt)(i.Z,{value:"sandbox",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -k --key private.key --cert transport.pem \\\n--location --request POST 'https://sandbox-mtls-auth.revolut.com/token' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=refresh_token' \\\n--data-urlencode 'refresh_token=<insert refresh_token>'\n")))),(0,l.kt)("p",null,"Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token":"oa_prod_h_M1nWyehXEkx3kF1QhEoqksQT0NaYKfBuEEBv1dSOY",\n  "token_type":"Bearer",\n  "expires_in":7775999\n}\n')),(0,l.kt)("p",null,"Each access token is valid for 90 days. When it expires, you must refresh the access token before you create a draft payment."),(0,l.kt)("p",null,"To do that, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"refresh_token")," returned in the previous step to request a new access token that can be used for a further 90 days. Check the request and response example on the right."),(0,l.kt)("h2",{id:"4-create-a-draft-payment"},"4. Create a draft payment"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Create a draft payment")),(0,l.kt)(o.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"prod",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request POST 'https://apis.revolut.com/draft-payments' \\\n--header 'Authorization: Bearer <insert access_token>' \\\n--header 'x-idempotency-key: 2c199c8c-671f-11eb-ae93-0242ac130002' \\\n--header 'Content-Type: text/csv' \\\n--data-binary @draft_payments.csv\n"))),(0,l.kt)(i.Z,{value:"sandbox",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request POST 'https://sandbox-apis.revolut.com/draft-payments' \\\n--header 'Authorization: Bearer <insert access_token>' \\\n--header 'x-idempotency-key: 2c199c8c-671f-11eb-ae93-0242ac130002' \\\n--header 'Content-Type: text/csv' \\\n--data-binary @draft_payments.csv\n")))),(0,l.kt)("p",null,"Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{"DraftPaymentId":"4bc0a477-2c81-4f49-bf5b-c6705bb7a6d9"}\n')),(0,l.kt)("p",null,"After you have an access token, you can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"/draft-payments")," endpoint to create a draft payment on behalf of the user. Include a CSV file with the supported format shown in the following tables and a unique ",(0,l.kt)("inlineCode",{parentName:"p"},"idempotency-key")," of ",(0,l.kt)("inlineCode",{parentName:"p"},"uuid")," format."),(0,l.kt)("p",null,"After you create the draft payment, it appears in the user's Revolut Business account where user can approve or reject."),(0,l.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The maximum number of rows in a CSV file is 50 and all the payments must be in the same currency."))),(0,l.kt)("p",null,"For information about which fields are required based on the country and the currency, see ",(0,l.kt)("a",{href:"#tutorials-tutorials-work-with-draft-payments-international-payments"},"International payments"),"."),(0,l.kt)("h3",{id:"parameters"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Located in"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Schema"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"scheduledDate")),(0,l.kt)("td",{parentName:"tr",align:null},"query"),(0,l.kt)("td",{parentName:"tr",align:null},"The date and time the draft payment is executed. Any draft payment in the CSV file is created as a scheduled payment."),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},'date in "YYYY-MM-DD" format')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"title")),(0,l.kt)("td",{parentName:"tr",align:null},"query"),(0,l.kt)("td",{parentName:"tr",align:null},"Title field for the Draft Payment order. Note that this is an API-only field, it won't appear in the user interface."),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"string")))),(0,l.kt)("h3",{id:"csv-format"},"CSV format"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Name")),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Can contain up to 80 characters. If ",(0,l.kt)("inlineCode",{parentName:"td"},"recipient type")," is ",(0,l.kt)("inlineCode",{parentName:"td"},"INDIVIDUAL"),", this field must contain a first and a last name, separated by a space.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Recipient type")),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Can be either ",(0,l.kt)("inlineCode",{parentName:"td"},"INDIVIDUAL")," or ",(0,l.kt)("inlineCode",{parentName:"td"},"COMPANY"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Account number")),(0,l.kt)("td",{parentName:"tr",align:null},"For non-IBAN countries"),(0,l.kt)("td",{parentName:"tr",align:null},"Must contain valid account number if provided.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Sort code or Routing number")),(0,l.kt)("td",{parentName:"tr",align:null},"For UK/US local transfers"),(0,l.kt)("td",{parentName:"tr",align:null},"Must contain valid sort code or routing number if provided.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"IBAN")),(0,l.kt)("td",{parentName:"tr",align:null},"For IBAN countries"),(0,l.kt)("td",{parentName:"tr",align:null},"Must contain valid IBAN if provided.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"BIC")),(0,l.kt)("td",{parentName:"tr",align:null},"All the countries except for UK/US local"),(0,l.kt)("td",{parentName:"tr",align:null},"Must contain valid BIC if provided.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Recipient bank country")),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Must contain valid ISO 3166-1 country code.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Currency")),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Must contain valid ISO 4217 currency code.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Amount")),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Must match following pattern ",(0,l.kt)("inlineCode",{parentName:"td"},"[0-9]*(\\\\.[0-9]*)?"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Payment reference")),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"Can contain up to 100 characters.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Recipient country")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Must contain valid ISO 3166-1 country code if provided.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"State or province")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Can contain up to 50 characters.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Address line 1")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Can contain up to 50 characters.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Address line 2")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Can contain up to 50 characters.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"City")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Can contain up to 50 characters.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Postal code")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Can contain up to 50 characters.")))),(0,l.kt)("div",{class:"feedback"}),(0,l.kt)("h2",{id:"5-get-a-draft-payment"},"5. Get a draft payment"),(0,l.kt)("p",null,"Get the details of a draft payment:"),(0,l.kt)(o.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"prod",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X GET https://apis.revolut.com/draft-payments/{DraftPaymentId} \\\n--header 'Authorization: Bearer <insert access_token>'\n"))),(0,l.kt)(i.Z,{value:"sandbox",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X GET https://sandbox-apis.revolut.com/draft-payments/{DraftPaymentId} \\\n--header 'Authorization: Bearer <insert access_token>'\n")))),(0,l.kt)("p",null,"Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Status": "Processed",\n    "Transfers": [\n        {\n            "InstructedAmount": {\n                "Amount": "10.00",\n                "Currency": "GBP"\n            },\n            "Reference": "User comment",\n            "Status": "Created",\n            "Index": 1\n        },\n        {\n            "InstructedAmount": {\n                "Amount": "20.00",\n                "Currency": "GBP"\n            },\n            "Reference": "User reference",\n            "Status": "Failed",\n            "FailedReason": "Something went wrong",\n            "FailedReasonCode": 3067,\n            "Index": 2\n        }\n    ]\n}\n')),(0,l.kt)("p",null,"Get the details about a specific draft payment with the given draft payment ID."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Index")," indicates the row number the draft payment represents in the CSV file."),(0,l.kt)("h2",{id:"6-get-list-of-draft-payments"},"6. Get list of draft payments"),(0,l.kt)("p",null,"Get a list of draft payments:"),(0,l.kt)(o.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"prod",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X GET https://apis.revolut.com/draft-payments?from=<insert_datefrom>&to=<insert_dateto>&limit=<insert_limit> \\\n--header 'Authorization: Bearer <insert access_token>'\n"))),(0,l.kt)(i.Z,{value:"sandbox",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X GET https://sandbox-apis.revolut.com/draft-payments?from=<insert_datefrom>&to=<insert_dateto>&limit=<insert_limit> \\\n--header 'Authorization: Bearer <insert access_token>'\n")))),(0,l.kt)("p",null,"Response:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Items": [\n              {\n                "Id": "d9805904-f722-432c-accd-d0f288c3532e",\n                "CreatedAt": "2021-03-28T15:16:20.444101Z",\n                "Status": "Awaiting",\n                "Title": "test_1"\n              },\n              {\n                "Id": "d9ab7bf0-5781-46ab-b503-d962ae5715ea",\n                "CreatedAt": "2021-03-24T19:03:03.367473Z",\n                "Status": "Awaiting",\n                "Title": "test_2"\n              }\n          ],\n  "Links":\n          {\n            "Next": "/draft-payments?to=2021-03-24T19:02:21.351937Z&limit=2"\n          }\n}\n')),(0,l.kt)("p",null,"Get a list of draft payments created by your application."),(0,l.kt)("p",null,"This endpoint returns draft payments in descending order of creation time and supports pagination: use the ",(0,l.kt)("inlineCode",{parentName:"p"},"limit")," field to specify the number of orders returned in the request. The location of the next page of results will be returned in the ",(0,l.kt)("inlineCode",{parentName:"p"},"Links.Next")," field."),(0,l.kt)("p",null,"Use the ",(0,l.kt)("inlineCode",{parentName:"p"},"to")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"from")," parameters to specify the date range that you want to pull Draft Payments from by creation date. ",(0,l.kt)("inlineCode",{parentName:"p"},"from")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"to")," dates are inclusive and exclusive of Draft Payments respectively."),(0,l.kt)("h3",{id:"parameters-1"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Located in"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Schema"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"from")),(0,l.kt)("td",{parentName:"tr",align:null},"query"),(0,l.kt)("td",{parentName:"tr",align:null},"Date and time you retrieve the draft payment orders from."),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},'date in "YYYY-MM-2DDThh:mm:ssZ" format')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"to")),(0,l.kt)("td",{parentName:"tr",align:null},"query"),(0,l.kt)("td",{parentName:"tr",align:null},"The date and time you retrieve the draft payment orders to. The default is now."),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},'date in "YYYY-MM-2DDThh:mm:ssZ" format')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"limit")),(0,l.kt)("td",{parentName:"tr",align:null},"query"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of draft payment orders returned via API."),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"integer")))),(0,l.kt)("h2",{id:"whats-next"},"What\u2019s next"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"See the ",(0,l.kt)("a",{href:"https://developer.revolut.com/api-reference/open-banking/#operation/createDraftPayment",target:"_blank"},"API Reference")," for full details on draft payments."),(0,l.kt)("li",{parentName:"ul"},"To check important considerations when you build your draft payments integration, see ",(0,l.kt)("a",{href:"#tutorials-work-with-draft-payments"},"Work with draft payments"),"."),(0,l.kt)("li",{parentName:"ul"},"To receive notifications about draft payments that you have created, see ",(0,l.kt)("a",{href:"#tutorials-work-with-webhooks"},"Work with webhooks"),"."),(0,l.kt)("li",{parentName:"ul"},"To request a new endpoint that meets your business requirements, fill out this short ",(0,l.kt)("a",{href:"https://docs.google.com/forms/d/1jTvhtnCvPvVviGxAqu03vVrnfcrhzkU6KhbAuQvUuQE/edit"},"form"),".")),(0,l.kt)("div",{class:"feedback"}))}k.isMDXComponent=!0},6010:function(e,t,a){"use strict";function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{Z:function(){return r}})}}]);