(self.webpackChunkdev_rev_docs=self.webpackChunkdev_rev_docs||[]).push([[1203],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(n),m=r,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return n?a.createElement(h,i(i({ref:t},u),{},{components:n})):a.createElement(h,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8215:function(e,t,n){"use strict";var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},5064:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(7294),r=n(9443);var o=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=n(6010),c="tabItem_1uMI",s="tabItemActive_2DSg";var l=37,u=39;var d=function(e){var t=e.lazy,n=e.block,r=e.defaultValue,d=e.values,p=e.groupId,m=e.className,h=o(),f=h.tabGroupChoices,v=h.setTabGroupChoices,y=(0,a.useState)(r),b=y[0],k=y[1],g=a.Children.toArray(e.children),N=[];if(null!=p){var w=f[p];null!=w&&w!==b&&d.some((function(e){return e.value===w}))&&k(w)}var x=function(e){var t=e.currentTarget,n=N.indexOf(t),a=d[n].value;k(a),null!=p&&(v(p,a),setTimeout((function(){var e,n,a,r,o,i,c,l;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,o=e.right,i=window,c=i.innerHeight,l=i.innerWidth,n>=0&&o<=l&&r<=c&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s),setTimeout((function(){return t.classList.remove(s)}),2e3))}),150))},O=function(e){var t,n;switch(e.keyCode){case u:var a=N.indexOf(e.target)+1;n=N[a]||N[0];break;case l:var r=N.indexOf(e.target)-1;n=N[r]||N[N.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},m)},d.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,className:(0,i.Z)("tabs__item",c,{"tabs__item--active":b===t}),key:t,ref:function(e){return N.push(e)},onKeyDown:O,onFocus:x,onClick:x},n)}))),t?(0,a.cloneElement)(g.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},g.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==b})}))))}},9443:function(e,t,n){"use strict";var a=(0,n(7294).createContext)(void 0);t.Z=a},4194:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return d},toc:function(){return p},default:function(){return h}});var a=n(2122),r=n(9756),o=(n(7294),n(3905)),i=n(5064),c=n(8215),s=["components"],l={sidebar_position:2},u="2. Create a payment",d={unversionedId:"manage-accounts/tutorials/create-a-payment",id:"manage-accounts/tutorials/create-a-payment",isDocsHomePage:!1,title:"2. Create a payment",description:"Due to PSD2 Strong Customer Authentication regulations, from the 1st April 2021, the payments endpoint is only available for customers on Revolut Business Company plans. We suggest that Freelancers wishing to use the Payment endpoint leverage our Payment Drafts endpoint instead to minimise disruption.",source:"@site/docs/manage-accounts/tutorials/create-a-payment.md",sourceDirName:"manage-accounts/tutorials",slug:"/manage-accounts/tutorials/create-a-payment",permalink:"/docs/manage-accounts/tutorials/create-a-payment",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docs",previous:{title:"1. Create a counterparty",permalink:"/docs/manage-accounts/tutorials/create-a-counterparty"},next:{title:"3. Retrieve transaction data",permalink:"/docs/manage-accounts/tutorials/retrieve-transaction-data"}},p=[{value:"Make an instant payment",id:"make-an-instant-payment",children:[]},{value:"Schedule a payment",id:"schedule-a-payment",children:[]}],m={toc:p};function h(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"2-create-a-payment"},"2. Create a payment"),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Due to PSD2 Strong Customer Authentication regulations, from the 1st April 2021, the payments endpoint is only available for customers on Revolut Business Company plans. We suggest that Freelancers wishing to use the Payment endpoint leverage our Payment Drafts endpoint instead to minimise disruption."))),(0,o.kt)("p",null,"This tutorial walks you through the steps to make an instant payment and schedule a payment."),(0,o.kt)("p",null,"An incoming or outgoing payment is represented as a transaction. A transaction is processed in two stages:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"A transaction is created,"),(0,o.kt)("li",{parentName:"ol"},"The transaction is processed in either of the following ways:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Credit/debit on both sides of the transaction made between Revolut accounts."),(0,o.kt)("li",{parentName:"ul"},"Posted to an external payment network, for example, Faster Payments, SEPA, SWIFT, etc.")),(0,o.kt)("p",null,"If the payment is made to an external payment network, when the transaction is created, it has the the ",(0,o.kt)("inlineCode",{parentName:"p"},"pending")," state. When it\u2019s processed, it can have one of the following states:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"completed")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"failed")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"reverted")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"declined"))),(0,o.kt)("p",null,"If the payment is made between Revolut accounts, the transaction is executed instantly, and skips the ",(0,o.kt)("inlineCode",{parentName:"p"},"pending")," state."),(0,o.kt)("div",{class:"feedback"}),(0,o.kt)("h2",{id:"make-an-instant-payment"},"Make an instant payment"),(0,o.kt)("p",null,"Pay a counterparty:"),(0,o.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,o.kt)(c.Z,{value:"prod",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST https://b2b.revolut.com/api/1.0/pay \\\n  -H "Authorization: Bearer <your access token>" \\\n  --data @- << EOF\n\n{\n  "request_id": "e0cbf84637264ee082a848b",\n  "account_id": "bdab1c20-8d8c-430d-b967-87ac01af060c",\n  "receiver": {\n    "counterparty_id": "5138z40d1-05bb-49c0-b130-75e8cf2f7693",\n    "account_id": "db7c73d3-b0df-4e0e-8a9a-f42aa99f52ab"\n  },\n  "amount": 123.11,\n  "currency": "EUR",\n  "reference": "Invoice payment #123"\n}\n\nEOF\n'))),(0,o.kt)(c.Z,{value:"sandbox",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST https://sandbox-b2b.revolut.com/api/1.0/pay \\\n  -H "Authorization: Bearer <your access token>" \\\n  --data @- << EOF\n\n{\n  "request_id": "e0cbf84637264ee082a848b",\n  "account_id": "bdab1c20-8d8c-430d-b967-87ac01af060c",\n  "receiver": {\n    "counterparty_id": "5138z40d1-05bb-49c0-b130-75e8cf2f7693",\n    "account_id": "db7c73d3-b0df-4e0e-8a9a-f42aa99f52ab"\n  },\n  "amount": 123.11,\n  "currency": "EUR",\n  "reference": "Invoice payment #123"\n}\n\nEOF\n')))),(0,o.kt)("p",null,"Response for an instantly processed payment:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "d56dd396-523b-4613-8cc7-54974c17bcac",\n  "state": "completed",\n  "created_at": "2017-10-01T10:10:10.0Z",\n  "completed_at": "2017-10-01T10:10:10.0Z"\n}\n')),(0,o.kt)("p",null,"Response for a payment that is processed asynchronously or is scheduled for processing in the future:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "d56dd396-523b-4613-8cc7-54974c17bcac",\n  "state": "created",\n  "created_at": "2017-10-01T10:10:10.0Z"\n}\n')),(0,o.kt)("p",null,"Create a payment using the ",(0,o.kt)("inlineCode",{parentName:"p"},"/pay")," endpoint."),(0,o.kt)("p",null,"If you make the payment to another Revolut account, either business or personal, the transaction is executed instantly."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"When you make the payment to a business counterparty, you must specify the ",(0,o.kt)("code",null,"account_id")," under ",(0,o.kt)("code",null,"receiver"),"."))),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"To avoid submitting duplicate payments because of an error in your code, ensure that ",(0,o.kt)("code",null,"request_id")," is unique for each payment and has persisted on your side previously."))),(0,o.kt)("div",{class:"feedback"}),(0,o.kt)("h2",{id:"schedule-a-payment"},"Schedule a payment"),(0,o.kt)("p",null,"Schedule an internal payment:"),(0,o.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,o.kt)(c.Z,{value:"prod",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST https://b2b.revolut.com/api/1.0/pay \\\n  -H "Authorization: Bearer <your access token>" \\\n  --data @- << EOF\n\n{\n  "request_id": "e0cbf84637264ee082a848b",\n  "account_id": "bdab1c20-8d8c-430d-b967-87ac01af060c",\n  "receiver": {\n    "counterparty_id": "5138z40d1-05bb-49c0-b130-75e8cf2f7693",\n    "account_id": "db7c73d3-b0df-4e0e-8a9a-f42aa99f52ab"\n  },\n  "amount": 123.11,\n  "currency": "EUR",\n  "reference": "Invoice payment #123",\n  "schedule_for": "2017-10-10"\n}\n\nEOF\n'))),(0,o.kt)(c.Z,{value:"sandbox",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X POST https://sandbox-b2b.revolut.com/api/1.0/pay \\\n  -H "Authorization: Bearer <your access token>" \\\n  --data @- << EOF\n\n{\n  "request_id": "e0cbf84637264ee082a848b",\n  "account_id": "bdab1c20-8d8c-430d-b967-87ac01af060c",\n  "receiver": {\n    "counterparty_id": "5138z40d1-05bb-49c0-b130-75e8cf2f7693",\n    "account_id": "db7c73d3-b0df-4e0e-8a9a-f42aa99f52ab"\n  },\n  "amount": 123.11,\n  "currency": "EUR",\n  "reference": "Invoice payment #123",\n  "schedule_for": "2017-10-10"\n}\n\nEOF\n')))),(0,o.kt)("p",null,"You can schedule payments between Revolut accounts for up to 30 days ahead. Scheduling payments to an external payment network is not supported at the moment."),(0,o.kt)("p",null,"Scheduled payments must be in the currency of the account that you pay from. To schedule a future payment, as opposed to immediate execution, add the ",(0,o.kt)("inlineCode",{parentName:"p"},"schedule_for")," field in the ",(0,o.kt)("inlineCode",{parentName:"p"},"POST /pay")," request:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Field"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Format"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"schedule_for")),(0,o.kt)("td",{parentName:"tr",align:null},"The future date and time that you schedule the payment."),(0,o.kt)("td",{parentName:"tr",align:null},"ISO date/time")))),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Payments scheduled for the same time might not be executed all at the same time.\nAs the scheduled processor runs every several hours, the payments are processed in batches; if you schedule too many payments, more time is required to process all the payments."))),(0,o.kt)("div",{class:"feedback"}))}h.isMDXComponent=!0},6010:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})}}]);