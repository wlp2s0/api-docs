(self.webpackChunkdev_rev_docs=self.webpackChunkdev_rev_docs||[]).push([[9332],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=o,k=p["".concat(s,".").concat(m)]||p[m]||d[m]||r;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8215:function(e,t,n){"use strict";var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:o},t)}},5064:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(7294),o=n(9443);var r=function(){var e=(0,a.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=n(6010),l="tabItem_1uMI",s="tabItemActive_2DSg";var c=37,u=39;var d=function(e){var t=e.lazy,n=e.block,o=e.defaultValue,d=e.values,p=e.groupId,m=e.className,k=r(),h=k.tabGroupChoices,f=k.setTabGroupChoices,v=(0,a.useState)(o),g=v[0],N=v[1],b=a.Children.toArray(e.children),y=[];if(null!=p){var T=h[p];null!=T&&T!==g&&d.some((function(e){return e.value===T}))&&N(T)}var w=function(e){var t=e.currentTarget,n=y.indexOf(t),a=d[n].value;N(a),null!=p&&(f(p,a),setTimeout((function(){var e,n,a,o,r,i,l,c;(e=t.getBoundingClientRect(),n=e.top,a=e.left,o=e.bottom,r=e.right,i=window,l=i.innerHeight,c=i.innerWidth,n>=0&&r<=c&&o<=l&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s),setTimeout((function(){return t.classList.remove(s)}),2e3))}),150))},x=function(e){var t,n;switch(e.keyCode){case u:var a=y.indexOf(e.target)+1;n=y[a]||y[0];break;case c:var o=y.indexOf(e.target)-1;n=y[o]||y[y.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},m)},d.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:g===t?0:-1,"aria-selected":g===t,className:(0,i.Z)("tabs__item",l,{"tabs__item--active":g===t}),key:t,ref:function(e){return y.push(e)},onKeyDown:x,onFocus:w,onClick:w},n)}))),t?(0,a.cloneElement)(b.filter((function(e){return e.props.value===g}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},b.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==g})}))))}},9443:function(e,t,n){"use strict";var a=(0,n(7294).createContext)(void 0);t.Z=a},694:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return u},metadata:function(){return d},toc:function(){return p},default:function(){return k}});var a=n(2122),o=n(9756),r=(n(7294),n(3905)),i=n(5064),l=n(8215),s=["components"],c={sidebar_position:1},u="Get account and transaction information",d={unversionedId:"build-banking-apps/tutorials/get-account-and-transaction-information",id:"build-banking-apps/tutorials/get-account-and-transaction-information",isDocsHomePage:!1,title:"Get account and transaction information",description:"This tutorial walks you through the steps to pull the data of a user's account from the /accounts endpoint.",source:"@site/docs/build-banking-apps/tutorials/get-account-and-transaction-information.md",sourceDirName:"build-banking-apps/tutorials",slug:"/build-banking-apps/tutorials/get-account-and-transaction-information",permalink:"/docs/build-banking-apps/tutorials/get-account-and-transaction-information",version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docs",previous:{title:"Delete an application",permalink:"/docs/build-banking-apps/manage-your-applications/delete-an-application"},next:{title:"Initiate your first payment",permalink:"/docs/build-banking-apps/tutorials/initiate-your-first-payment"}},p=[{value:"1. Generate a client credentials token",id:"1-generate-a-client-credentials-token",children:[]},{value:"2. Create a consent",id:"2-create-a-consent",children:[]},{value:"3. Create a JWT URL parameter",id:"3-create-a-jwt-url-parameter",children:[]},{value:"4. Get the consent from user",id:"4-get-the-consent-from-user",children:[]},{value:"5. Exchange authorization code for access token",id:"5-exchange-authorization-code-for-access-token",children:[]},{value:"6. Get a list of accounts",id:"6-get-a-list-of-accounts",children:[]},{value:"What\u2019s next",id:"whats-next",children:[]}],m={toc:p};function k(e){var t=e.components,n=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"get-account-and-transaction-information"},"Get account and transaction information"),(0,r.kt)("p",null,"This tutorial walks you through the steps to pull the data of a user's account from the ",(0,r.kt)("inlineCode",{parentName:"p"},"/accounts")," endpoint."),(0,r.kt)("p",null,"Similar steps apply to all of accounts and transactions endpoints. Therefore, after you complete this tutorial, you will know how to use all the accounts and transactions endpoints."),(0,r.kt)("p",null,"See the ",(0,r.kt)("a",{href:"https://developer.revolut.com/api-reference/open-banking/#tag/Account-and-Transactions"},"API Reference")," for all the available endpoints."),(0,r.kt)("p",null,"Before you begin, ensure that you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Registered your application with the ",(0,r.kt)("inlineCode",{parentName:"li"},"accounts")," scope in Developer Portal"),(0,r.kt)("li",{parentName:"ul"},"Obtained a sandbox/production ",(0,r.kt)("inlineCode",{parentName:"li"},"client_id"),"  from Developer Portal"),(0,r.kt)("li",{parentName:"ul"},"Obtained a sandbox/production ",(0,r.kt)("inlineCode",{parentName:"li"},"transport.pem")," certificate from Developer Portal or QTSP issuing body"),(0,r.kt)("li",{parentName:"ul"},"Uploaded the ",(0,r.kt)("a",{href:"https://developer.revolut.com/docs/build-banking-apps/#register-your-application-using-dcr-1-get-the-jwks-url"},(0,r.kt)("inlineCode",{parentName:"li"},"jwks_url"))," in Developer Portal that is specific to your ",(0,r.kt)("inlineCode",{parentName:"li"},"transport.pem")," certificate")),(0,r.kt)("div",{class:"feedback"}),(0,r.kt)("h2",{id:"1-generate-a-client-credentials-token"},"1. Generate a client credentials token"),(0,r.kt)("p",null,"Get a token:"),(0,r.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl --cert transport.pem --key private.key \\\n--location --request POST 'https://oba-auth.revolut.com/token' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=client_credentials' \\\n--data-urlencode 'scope=accounts' \\\n--data-urlencode 'client_id=<your_client_id>'\n"))),(0,r.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl -k --cert transport.pem --key private.key \\\n--location --request POST 'https://sandbox-oba-auth.revolut.com/token' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=client_credentials' \\\n--data-urlencode 'scope=accounts' \\\n--data-urlencode 'client_id=<your_client_id>'\n")))),(0,r.kt)("p",null,"Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token":"eyJhbGciOiJQUzI1NiJ9.eyJjbGllbnRJZCI6IjFlYzFkYjJkLTNlNWItNGQ4Mi1iNDJlLTA2Nzk0NTYyZTIwZSIsInNjb3BlcyI6WyJhY2NvdW50cyJdLCJleHAiOjE2MDQ5MzAzOTh9.pMMtYxYh8_M8P0v9_yfJ29iq3h2x_1RT6BLJPbrJ6SSsai_fQmMNGWXtDapPCSvWtn-ol0aN8Pl725uSSJqWHFxdh0PwvKP1762s5jy7xcLTkb8tgg-AoTPm87-vsnHnw5z63yiDW1Migdx7vDN_jRe3WUSfE-u0Qv7W3SLVo8kB5-qxn2VHZTBSaBr5XReINBHJgh7Xi9LzqxqUh0yCiZSSRnu8o7-I_Q1K0jPK1D7ve7BxlkOb5fSR59CbtzfkZpI6jKDOWSqU_5mftqRRylle382nfS6AeY2eubdH6OS-lJRFcwsYplauE-tZ__54G4LTjPhUWQezvewCc5gq2Q",\n  "token_type":"Bearer",\n  "expires_in": 2399\n}\n')),(0,r.kt)("p",null,"Request an access token for client credentials using the ",(0,r.kt)("inlineCode",{parentName:"p"},"/token")," endpoint and the ",(0,r.kt)("inlineCode",{parentName:"p"},"client_credentials")," grant type."),(0,r.kt)("p",null,"You use this token to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{href:"#manage-your-applications-update-an-application"},"Update your application"),"."),(0,r.kt)("li",{parentName:"ul"},"Create a consent in the next step.")),(0,r.kt)("div",{class:"feedback"}),(0,r.kt)("h2",{id:"2-create-a-consent"},"2. Create a consent"),(0,r.kt)("p",null,"Create a consent:"),(0,r.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'https://oba.revolut.com/account-access-consents\' \\\n--header \'x-fapi-financial-id: 001580000103UAvAAM\' \\\n--header \'Authorization: Bearer <insert access_token>\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'\n{\n    "Data": {\n        "Permissions": [\n            "ReadAccountsBasic",\n            "ReadAccountsDetail"\n        ],\n        "ExpirationDateTime": "2020-12-02T00:00:00+00:00",\n        "TransactionFromDateTime": "2020-09-03T00:00:00+00:00",\n        "TransactionToDateTime": "2020-12-03T00:00:00+00:00"\n    },\n    "Risk": {}\n}\'\n'))),(0,r.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'https://sandbox-oba.revolut.com/account-access-consents\' \\\n--header \'x-fapi-financial-id: 001580000103UAvAAM\' \\\n--header \'Authorization: Bearer <insert access_token>\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'\n{\n    "Data": {\n        "Permissions": [\n            "ReadAccountsBasic",\n            "ReadAccountsDetail"\n        ],\n        "ExpirationDateTime": "2020-12-02T00:00:00+00:00",\n        "TransactionFromDateTime": "2020-09-03T00:00:00+00:00",\n        "TransactionToDateTime": "2020-12-03T00:00:00+00:00"\n    },\n    "Risk": {}\n}\'\n')))),(0,r.kt)("p",null,"Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Data": {\n    "Status": "AwaitingAuthorisation",\n    "StatusUpdateDateTime": "2020-11-05T16:07:46.506182Z",\n    "CreationDateTime": "2020-11-05T16:07:46.506182Z",\n    "TransactionToDateTime": "2017-12-03T00:00:00+00:00",\n    "ExpirationDateTime": "2021-05-02T00:00:00+00:00",\n    "Permissions": [\n      "ReadAccountsBasic",\n      "ReadAccountsDetail"\n    ],\n    "ConsentId": "d19ec758-22fd-4f34-9ad4-7437f8628987",\n    "TransactionFromDateTime": "2017-05-03T00:00:00+00:00"\n  },\n  "Risk": {},\n  "Links": {\n    "Self": "https://oba.revolut.com/account-access-consents"\n  },\n  "Meta": {\n    "TotalPages": 1\n  }\n}\n')),(0,r.kt)("p",null,"Create a consent for specific permissions using the ",(0,r.kt)("inlineCode",{parentName:"p"},"/account-access-consents")," endpoint."),(0,r.kt)("p",null,"In this tutorial, you create a consent for the following permissions, shown in the code example on the right:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ReadAccountBasic")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ReadAccountsDetail"))),(0,r.kt)("p",null,"To check all the supported permissions and the dependencies, see the ",(0,r.kt)("a",{href:"https://developer.revolut.com/api-reference/open-banking/#operation/CreateAccountAccessConsents"},"API Reference"),"."),(0,r.kt)("div",{class:"feedback"}),(0,r.kt)("h2",{id:"3-create-a-jwt-url-parameter"},"3. Create a JWT URL parameter"),(0,r.kt)("p",null,"After you create a consent, you need the user to authorize the consent so that you can access the data on their behalf."),(0,r.kt)("p",null,"Header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "alg": "PS256",\n  "kid": "<insert kid>"\n}\n')),(0,r.kt)("p",null,"Body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "response_type": "code id_token",\n  "client_id": <insert client_id>,\n  "redirect_uri": <insert redirect_uri>,\n  "scope": "accounts",\n  "claims": {\n    "id_token": {\n      "openbanking_intent_id": {\n        "value": <insert ConsentId>\n      }\n    }\n  }\n}\n')),(0,r.kt)("p",null,"Create a JWT request parameter with the header and body format on the right, signed by your signing certificate\u2019s private key. This signature is validated using the JWKs endpoint that you specified during the registration of your application. ",(0,r.kt)("a",{href:"https://jwt.io/"},"jwt.io")," is a helpful tool for debugging JWTs."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The values of ",(0,r.kt)("code",null,"client_id"),",  ",(0,r.kt)("code",null,"redirect_uri"),", ",(0,r.kt)("code",null,"kid"),", and ",(0,r.kt)("code",null,"scope")," should correspond to those for your specific application and consent request."),(0,r.kt)("p",{parentName:"div"},"The value of ",(0,r.kt)("code",null,"openbanking_intent_id")," is the value of the ",(0,r.kt)("code",null,"ConsentId")," field generated from the previous step."))),(0,r.kt)("div",{class:"feedback"}),(0,r.kt)("h2",{id:"4-get-the-consent-from-user"},"4. Get the consent from user"),(0,r.kt)("p",null,"Sample URL:"),(0,r.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"https://oba.revolut.com/ui/index.html?response_type=code%26id_token&scope=accounts&redirect_uri=<insert redirect URL>&client_id=<insert client_id>&request=<insert JWT>\n"))),(0,r.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"https://sandbox-oba.revolut.com/ui/index.html?response_type=code%26id_token&scope=accounts&redirect_uri=<insert redirect URL>&client_id=<insert client_id>&request=<insert JWT>\n")))),(0,r.kt)("p",null,"Redirect the user to the authorization URL with the following parameters."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"response_type")),(0,r.kt)("td",{parentName:"tr",align:null},"Always set to ",(0,r.kt)("inlineCode",{parentName:"td"},"code&id_token"),"."),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"client_id")),(0,r.kt)("td",{parentName:"tr",align:null},"The client ID for your application."),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"redirect_uri")),(0,r.kt)("td",{parentName:"tr",align:null},"One of the redirect URIs that you defined during the application creation."),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"scope")),(0,r.kt)("td",{parentName:"tr",align:null},"The scope that you are requesting, for example, ",(0,r.kt)("inlineCode",{parentName:"td"},"accounts")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"payments"),"."),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"request ")),(0,r.kt)("td",{parentName:"tr",align:null},"The encoded JWT generated from the previous step."),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"response_mode")),(0,r.kt)("td",{parentName:"tr",align:null},"If set to ",(0,r.kt)("inlineCode",{parentName:"td"},"fragment")," parameters will be passed in fragment section of redirect URI. Otherwise, parameters are passed in URI query. Passing parameters in fragment is considered to be more secure."),(0,r.kt)("td",{parentName:"tr",align:null},"no")))),(0,r.kt)("p",null,"Sample redirect after successful response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://www.revolut_redirect.com/?code=oa_sand_sPoyVs-oMhyR36j5N-ZEVLfK9rQWPNssgIQqsOFZQ-c&id_token=eyJraWQiOiJxRlFQaTRPVkJVLVNaVk5iMjJ5VjVHQVZDN1UiLCJhbGciOiJQUzI1NiJ9.eyJpc3MiOiJodHRwczovL29iYS5yZXZvbHV0LmNvZGVzIiwiaWF0IjoxNjA0OTM2ODUzLCJzdWIiOiI0NjdiYzg3MC1jOTllLTQ0MzQtYTk1OS1iOGM1NmVlNmEwMjciLCJhY3IiOiJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2EiLCJvcGVuYmFua2luZ19pbnRlbnRfaWQiOiI0NjdiYzg3MC1jOTllLTQ0MzQtYTk1OS1iOGM1NmVlNmEwMjciLCJhdWQiOiIxZWMxZGIyZC0zZTViLTRkODItYjQyZS0wNjc5NDU2MmUyMGUiLCJub25jZSI6Im4tMFM2X1d6QTJNaiIsImV4cCI6MTYwNDkzNzQ1MywiY19oYXNoIjoiTXNfRnRwdWs0U2VDNW4zdUNMTTc0ZyIsInNfaGFzaCI6IlM2YVhOY3BUZGw3V3B3bnR0V3h1b2cifQ.m-EvhggqLg7ZXh0we_PLKNsc248p8Bn_o5nj7_6CQHkiRI23ZrYjJLlz_1BhvZ_iY1Tll2gybq_0eSKRgHpvOPnhvCbcSAyfkE8YERZoVkIe-64cyiomhaqBzMzjQyghaL4KrnKH667wR1gTjVhwyJyztalTKidoLZ5OFVWRSHkqW3YLm-_q51wP0k7HHvJ-fnkGcIoCv2TYXpb9xykvgGRJv9KIISbQtM_bLBpo5Q6Q1fxNc-LK2iT-o22xQzLhzvGHtXLTl7Kn5xYf8quDjA5zG0iCAGLJ-Fo9NuTobcKjJOaNYpQ_Y2ilKMmtXqRdgAF_in4Lydt2dn9duxFvJA&state=state\n")),(0,r.kt)("p",null,"On successful completion of the authorization flow, you receive an authorization code (",(0,r.kt)("inlineCode",{parentName:"p"},"code"),") as a URL parameter in the redirect."),(0,r.kt)("p",null,"Check the response example on the right to see what the ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," looks like."),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The ",(0,r.kt)("code",null,"code")," is valid only for two minutes."))),(0,r.kt)("div",{class:"feedback"}),(0,r.kt)("h2",{id:"5-exchange-authorization-code-for-access-token"},"5. Exchange authorization code for access token"),(0,r.kt)("p",null,"Exchange for access token:"),(0,r.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl  --key private.key --cert transport.pem \\\n--location --request POST 'https://oba-auth.revolut.com/token' \\\n--header 'Content-Type:application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=authorization_code' \\\n--data-urlencode 'code=<insert auth_code>'\n"))),(0,r.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl -k --key private.key --cert transport.pem \\\n--location --request POST 'https://sandbox-oba-auth.revolut.com/token' \\\n--header 'Content-Type:application/x-www-form-urlencoded' \\\n--data-urlencode 'grant_type=authorization_code' \\\n--data-urlencode 'code=<insert auth_code>'\n")))),(0,r.kt)("p",null,"Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token":"oa_sand_tP1Nofi1ixsRfBmVBtVPdIVN0J5x91imqmheQIWTS5s",\n  "access_token_id":"3d3ef8a1-f920-4d6d-9106-e7fcf350125c",\n  "token_type":"Bearer",\n  "expires_in":7775999,\n  "id_token":"eyJraWQiOiJxRlFQaTRPVkJVLVNaVk5iMjJ5VjVHQVZDN1UiLCJhbGciOiJQUzI1NiJ9.eyJpc3MiOiJodHRwczovL29iYS5yZXZvbHV0LmNvZGVzIiwic3ViIjoiNDY3YmM4NzAtYzk5ZS00NDM0LWE5NTktYjhjNTZlZTZhMDI3IiwiYXVkIjoiMWVjMWRiMmQtM2U1Yi00ZDgyLWI0MmUtMDY3OTQ1NjJlMjBlIiwibm9uY2UiOiJuLTBTNl9XekEyTWoiLCJleHAiOjE2MDQ5Mzc0Nzk1NjksImlhdCI6MTYwNDkzNjg3OX0.NrcI6qSwmkTC4zhVP7S9Se1RD8Mnwfz5D3RyGp_5CI7MN6-GLqGHnIBNPNzbUBjlmer8ecCvhm0j9tkScT0xDMSZUdMjRyvb7qrsXYTVbj0ogDPthZSe-45tiq3y4oOsIusIwMPFWGHzI2zq_wzxYY8h6QXFIK6TB_oC93jM6J5JEUUQwvDR23ntcCoH_9uNaGM2PXO2ppxhxZiJe92TYcoZFCIMxqrcVxuUYM1VLQ8d7TcpoIDWdOmtOVqDYmblUHyjFpO3IcBHalua0LRGmU3ZuaEv2iG3YzpqV0OMIHFUe9fQ95z_jID4rGIWwxRL6URIdzw6ZSSyxRXKRWNh3g"\n}\n')),(0,r.kt)("p",null,"After the user authorize your consent, you use the ",(0,r.kt)("inlineCode",{parentName:"p"},"/token")," endpoint with ",(0,r.kt)("inlineCode",{parentName:"p"},"grant_type=authorization_code")," to get the access token that you can use to access the Accounts API."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"access_token_id")," is used in conjunction with the ",(0,r.kt)("inlineCode",{parentName:"p"},"token")," webhook to identify tokens where the user has revoked their consent."),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The value of ",(0,r.kt)("code",null,"auth_code")," is the authorization code (",(0,r.kt)("code",null,"code"),") generated from the previous step."))),(0,r.kt)("div",{class:"feedback"}),(0,r.kt)("h2",{id:"6-get-a-list-of-accounts"},"6. Get a list of accounts"),(0,r.kt)("p",null,"Get a list of accounts:"),(0,r.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X GET https://oba.revolut.com/accounts \\\n--header 'Authorization: Bearer <insert access_token>' \\\n--header 'x-fapi-financial-id: 001580000103UAvAAM'\n"))),(0,r.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X GET https://sandbox-oba.revolut.com/accounts \\\n--header 'Authorization: Bearer <insert access_token>' \\\n--header 'x-fapi-financial-id: 001580000103UAvAAM'\n")))),(0,r.kt)("p",null,"Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Data": {\n    "Account": [\n      {\n        "AccountId": "A1086696-D134-472D-B83E-A3F4D201C058",\n        "Currency": "GBP",\n        "AccountType": "Personal",\n        "AccountSubType": "CurrentAccount",\n        "Nickname": "Bills",\n        "Account": [\n          {\n            "SchemeName": "UK.OBIE.SortCodeAccountNumber",\n            "Identification": "80200110203345",\n            "Name": "Mr Kevin",\n            "SecondaryIdentification": "00021"\n          }\n        ]\n      }\n    ]\n  },\n  "Links": {\n    "Self": "https://oba.revolut.com/accounts/"\n  },\n  "Meta": {\n    "TotalPages": 1\n  }\n}\n')),(0,r.kt)("p",null,"After you generate this access token, you can use it to send requests to the API. Make a call to the ",(0,r.kt)("inlineCode",{parentName:"p"},"/accounts")," endpoint to retrieve a list of the user's accounts."),(0,r.kt)("p",null,"Congratulations! You have successfully made your first API request to one of our Accounts and Transactions endpoints."),(0,r.kt)("h2",{id:"whats-next"},"What\u2019s next"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"See the ",(0,r.kt)("a",{href:"https://developer.revolut.com/api-reference/open-banking/#tag/Account-and-Transactions",target:"_blank"},"API Reference")," for full details on different permissions and endpoints."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{href:"#tutorials-initiate-your-first-payment"},"Initiate your first payment:")," see the tutorial for building your integration to our payments endpoints.")),(0,r.kt)("div",{class:"feedback"}))}k.isMDXComponent=!0},6010:function(e,t,n){"use strict";function a(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function o(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(o&&(o+=" "),o+=t);return o}n.d(t,{Z:function(){return o}})}}]);