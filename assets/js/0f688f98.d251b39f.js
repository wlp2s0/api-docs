(self.webpackChunkdev_rev_docs=self.webpackChunkdev_rev_docs||[]).push([[7695],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return s},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=n.createContext({}),c=function(e){var t=n.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,h=d["".concat(u,".").concat(m)]||d[m]||p[m]||o;return a?n.createElement(h,i(i({ref:t},s),{},{components:a})):n.createElement(h,i({ref:t},s))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8215:function(e,t,a){"use strict";var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,r=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:r},t)}},5064:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(7294),r=a(9443);var o=function(){var e=(0,n.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=a(6010),l="tabItem_1uMI",u="tabItemActive_2DSg";var c=37,s=39;var p=function(e){var t=e.lazy,a=e.block,r=e.defaultValue,p=e.values,d=e.groupId,m=e.className,h=o(),f=h.tabGroupChoices,y=h.setTabGroupChoices,v=(0,n.useState)(r),b=v[0],k=v[1],g=n.Children.toArray(e.children),w=[];if(null!=d){var N=f[d];null!=N&&N!==b&&p.some((function(e){return e.value===N}))&&k(N)}var T=function(e){var t=e.currentTarget,a=w.indexOf(t),n=p[a].value;k(n),null!=d&&(y(d,n),setTimeout((function(){var e,a,n,r,o,i,l,c;(e=t.getBoundingClientRect(),a=e.top,n=e.left,r=e.bottom,o=e.right,i=window,l=i.innerHeight,c=i.innerWidth,a>=0&&o<=c&&r<=l&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(u),setTimeout((function(){return t.classList.remove(u)}),2e3))}),150))},x=function(e){var t,a;switch(e.keyCode){case s:var n=w.indexOf(e.target)+1;a=w[n]||w[0];break;case c:var r=w.indexOf(e.target)-1;a=w[r]||w[w.length-1]}null==(t=a)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},m)},p.map((function(e){var t=e.value,a=e.label;return n.createElement("li",{role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,className:(0,i.Z)("tabs__item",l,{"tabs__item--active":b===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:x,onFocus:T,onClick:T},a)}))),t?(0,n.cloneElement)(g.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},g.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==b})}))))}},9443:function(e,t,a){"use strict";var n=(0,a(7294).createContext)(void 0);t.Z=n},9451:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return d},default:function(){return h}});var n=a(2122),r=a(9756),o=(a(7294),a(3905)),i=a(5064),l=a(8215),u=["components"],c={sidebar_position:4},s="Authorize an amount to capture later",p={unversionedId:"accept-payments/tutorials/capture-later",id:"accept-payments/tutorials/capture-later",isDocsHomePage:!1,title:"Authorize an amount to capture later",description:"You can authorize an amount on a customer's card and capture all or part of it later. This method also allows you to cancel an authorisation which is a much faster and effective method to return to your customers the money they paid.",source:"@site/docs/accept-payments/tutorials/capture-later.md",sourceDirName:"accept-payments/tutorials",slug:"/accept-payments/tutorials/capture-later",permalink:"/docs/accept-payments/tutorials/capture-later",version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docs",previous:{title:"Charge a customer\u2019s saved payment method",permalink:"/docs/accept-payments/tutorials/charge-saved-payment-method"},next:{title:"Configuration",permalink:"/docs/accept-payments/tutorials/test-in-the-sandbox-environment/configuration"}},d=[{value:"1. Create an order with capture_mode = MANUAL",id:"1-create-an-order-with-capture_mode--manual",children:[]},{value:"2. Take a payment from a customer",id:"2-take-a-payment-from-a-customer",children:[]},{value:"3. Capture the payment",id:"3-capture-the-payment",children:[]},{value:"(Optional) Cancel the payment",id:"optional-cancel-the-payment",children:[]}],m={toc:d};function h(e){var t=e.components,a=(0,r.Z)(e,u);return(0,o.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"authorize-an-amount-to-capture-later"},"Authorize an amount to capture later"),(0,o.kt)("p",null,"You can authorize an amount on a customer's card and capture all or part of it later. This method also allows you to cancel an authorisation which is a much faster and effective method to return to your customers the money they paid. "),(0,o.kt)("p",null,"This is useful in many scenarios. For example:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"When your business is heavily based on fulfillment of products, you might want to avoid capturing until the products are fulfilled. This way, if you can't fulfil them, you can cancel the order and the money will be immediately liberated into your customer's account (instead of taking 5-7 days as it would with a normal refund)"),(0,o.kt)("li",{parentName:"ul"},"When your business requires to hold an amount of money for a service provided and at the end of the service provided you only take its final value (e.g. any form of equipment rental)")),(0,o.kt)("p",null,"Find below the steps on "),(0,o.kt)("h2",{id:"1-create-an-order-with-capture_mode--manual"},"1. Create an order with capture_mode = MANUAL"),(0,o.kt)("p",null,"The first step is to create an Order that will not be automatically captured right after making a payment. To do so, you can create an Order and set the ",(0,o.kt)("inlineCode",{parentName:"p"},"capture_mode")," parameter to ",(0,o.kt)("inlineCode",{parentName:"p"},"MANUAL"),". Here is an example with minimal parameters:"),(0,o.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X "POST" "https://merchant.revolut.com/api/1.0/orders" \\\n     -H \'Authorization: Bearer [yourApiKey]\' \\\n     -H \'Content-Type: application/json; charset=utf-8\' \\\n     -d $\'{\n          "amount": 100,\n          "currency": "GBP",\n          "capture_mode": "MANUAL"\n        }\'\n'))),(0,o.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl -X "POST" "https://sandbox-merchant.revolut.com/api/1.0/orders" \\\n     -H \'Authorization: Bearer [yourSandboxApiKey]\' \\\n     -H \'Content-Type: application/json; charset=utf-8\' \\\n     -d $\'{\n          "amount": 100,\n          "currency": "GBP",\n          "capture_mode": "MANUAL"\n        }\'\n')))),(0,o.kt)("h2",{id:"2-take-a-payment-from-a-customer"},"2. Take a payment from a customer"),(0,o.kt)("p",null,"Follow the steps outlined in our previous tutorial to ",(0,o.kt)("a",{parentName:"p",href:"/docs/accept-payments/tutorials/accept-your-first-card-payment"},"accept a card payment from your customer"),"."),(0,o.kt)("p",null,"After taking the payment, you should have an order in ",(0,o.kt)("inlineCode",{parentName:"p"},"AUTHORISED")," state."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"An order will remain ",(0,o.kt)("strong",{parentName:"p"},"in Authorised state for 7 days")," after the payment was made. After 7 days, the amount will be voided and it will not be possible to capture any more."))),(0,o.kt)("h2",{id:"3-capture-the-payment"},"3. Capture the payment"),(0,o.kt)("p",null,"When it's time to finally take the payment you can use the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.revolut.com/api-reference/merchant/#operation/captureOrder"},"Capture request")," to take the amount that was authorised:"),(0,o.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X \"POST\" \"https://merchant.revolut.com/api/1.0/orders/[orderID]/capture\" \\\n     -H 'Authorization: Bearer [yourApiKey]' \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n"))),(0,o.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X \"POST\" \"https://sandbox-merchant.revolut.com/api/1.0/orders/[orderID]/capture\" \\\n     -H 'Authorization: Bearer [yourSandboxApiKey]' \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n")))),(0,o.kt)("p",null,"Also, you can send an amount in the body of the request to capture a partial amount of what was originally authorised:"),(0,o.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X \"POST\" \"https://merchant.revolut.com/api/1.0/orders/[orderID]/capture\" \\\n     -H 'Authorization: Bearer [yourApiKey]' \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n     -d $'{\n            \"amount\": 65\n        }'\n\n"))),(0,o.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X \"POST\" \"https://sandbox-merchant.revolut.com/api/1.0/orders/[orderID]/capture\" \\\n     -H 'Authorization: Bearer [yourSandboxApiKey]' \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n     -d $'{\n            \"amount\": 65\n        }'\n")))),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can only capture an order once. After capturing a partial amount, the rest of the authorised amount will be voided and returned to your customer's original payment method."))),(0,o.kt)("h2",{id:"optional-cancel-the-payment"},"(Optional) Cancel the payment"),(0,o.kt)("p",null,"If you would like to return the full authorised amount to your customer, you can ",(0,o.kt)("a",{parentName:"p",href:"https://developer.revolut.com/api-reference/merchant/#operation/cancelOrder"},"Cancel the order"),". The amount will be immediately voided and returned to your customer's original payment method."),(0,o.kt)("p",null,"To cancel an order:"),(0,o.kt)(i.Z,{defaultValue:"prod",values:[{label:"Production",value:"prod"},{label:"Sandbox",value:"sandbox"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"prod",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X \"POST\" \"https://merchant.revolut.com/api/1.0/orders/[orderID]/cancel\" \\\n     -H 'Authorization: Bearer [yourApiKey]' \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n"))),(0,o.kt)(l.Z,{value:"sandbox",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl -X \"POST\" \"https://sandbox-merchant.revolut.com/api/1.0/orders/[orderID]/cancel\" \\\n     -H 'Authorization: Bearer [yourSandboxApiKey]' \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n")))))}h.isMDXComponent=!0},6010:function(e,t,a){"use strict";function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{Z:function(){return r}})}}]);